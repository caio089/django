<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Quiz - Teoria do Jud√¥</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" />
  <script>
    tailwind.config = {
      theme: {
        extend: {
          colors: {
            judo: {
              emerald: '#10B981',
              gray: '#6B7280',
              blue: '#3B82F6',
              yellow: '#FBBF24',
              orange: '#F97316',
              green: '#10B981',
              purple: '#8B5CF6',
              brown: '#92400E'
            }
          },
          fontFamily: {
            'display': ['Inter', 'system-ui', 'sans-serif'],
          }
        }
      }
    }
  </script>
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap');
    
    .gradient-bg {
      background: linear-gradient(135deg, #1E40AF 0%, #1D4ED8 100%);
    }
    
    .card-hover {
      transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    }
    
    .card-hover:hover {
      transform: translateY(-4px);
      box-shadow: 0 20px 40px -12px rgba(30,64,175,0.25);
    }
    
    .fade-in {
      animation: fadeIn 0.6s ease-out;
    }
    
    @keyframes fadeIn {
      from { 
        opacity: 0; 
        transform: translateY(20px); 
      }
      to { 
        opacity: 1; 
        transform: translateY(0); 
      }
    }
    
    .slide-in {
      animation: slideIn 0.5s ease-out;
    }
    
    @keyframes slideIn {
      from { 
        opacity: 0; 
        transform: translateX(-30px); 
      }
      to { 
        opacity: 1; 
        transform: translateX(0); 
      }
    }
    
    .bounce-in {
      animation: bounceIn 0.8s ease-out;
    }
    
    @keyframes bounceIn {
      0% { 
        opacity: 0; 
        transform: scale(0.3); 
      }
      50% { 
        opacity: 1; 
        transform: scale(1.05); 
      }
      70% { 
        transform: scale(0.9); 
      }
      100% { 
        opacity: 1; 
        transform: scale(1); 
      }
    }
    
    .progress-bar {
      transition: width 0.8s ease-in-out;
    }
    
    .answer-btn {
      transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    }
    
    .answer-btn:hover {
      transform: translateY(-2px);
      box-shadow: 0 8px 20px -5px rgba(30,64,175,0.2);
    }
    
    .correct-answer {
      animation: correctPulse 0.6s ease-out;
    }
    
    @keyframes correctPulse {
      0% { transform: scale(1); }
      50% { transform: scale(1.05); }
      100% { transform: scale(1); }
    }
    
    .incorrect-answer {
      animation: incorrectShake 0.6s ease-out;
    }
    
    @keyframes incorrectShake {
      0%, 100% { transform: translateX(0); }
      25% { transform: translateX(-5px); }
      75% { transform: translateX(5px); }
    }
    
    .text-gradient {
      background: linear-gradient(45deg, #1E40AF, #1D4ED8);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
    }
    
    .section-divider {
      background: linear-gradient(90deg, transparent, #DBEAFE, transparent);
    }
    
    /* Melhorias de responsividade para mobile */
    @media (max-width: 640px) {
      .answer-btn {
        padding: 0.75rem 1rem;
        font-size: 0.875rem;
      }
      
      .card-hover {
        padding: 1rem;
      }
      
      .card-hover h2 {
        font-size: 1.25rem;
        line-height: 1.4;
      }
    }
    
    /* Estilos para feedback visual */
    .answer-correct {
      background-color: #10B981 !important;
      color: white !important;
      border-color: #10B981 !important;
      animation: correctPulse 0.6s ease-out;
    }
    
    .answer-incorrect {
      background-color: #EF4444 !important;
      color: white !important;
      border-color: #EF4444 !important;
      animation: incorrectShake 0.6s ease-out;
    }
    
    .answer-show-correct {
      background-color: #10B981 !important;
      color: white !important;
      border-color: #10B981 !important;
    }
    
    @keyframes correctPulse {
      0% { transform: scale(1); }
      50% { transform: scale(1.05); }
      100% { transform: scale(1); }
    }
    
    @keyframes incorrectShake {
      0%, 100% { transform: translateX(0); }
      25% { transform: translateX(-5px); }
      75% { transform: translateX(5px); }
    }
  </style>
</head>
<body class="bg-gray-50 font-display min-h-screen">
    <!-- CSRF Token para requisi√ß√µes AJAX -->
    {% csrf_token %}
  <!-- Header com Progresso responsivo -->
  <header class="gradient-bg text-white py-4 sm:py-6 px-4">
    <div class="max-w-4xl mx-auto">
      <div class="flex items-center justify-between mb-4 sm:mb-6">
        <div class="flex-1">
          <h1 class="text-xl sm:text-2xl md:text-3xl lg:text-4xl font-bold mb-1 sm:mb-2 flex items-center gap-2 sm:gap-3">
            <i class="fa-solid fa-medal text-blue-300 text-lg sm:text-xl md:text-2xl"></i>
            <span class="text-white">Quiz - Teoria do Jud√¥</span>
          </h1>
          <p class="text-blue-100 text-sm sm:text-base md:text-lg">Teste seus conhecimentos sobre a arte suave</p>
        </div>
        <a href="/index/" class="bg-white/20 hover:bg-white/30 px-3 py-2 sm:px-4 sm:py-2 rounded-lg transition-colors text-sm sm:text-base ml-2">
          <i class="fa-solid fa-arrow-left mr-1 sm:mr-2"></i>
          <span class="hidden sm:inline">Voltar</span>
        </a>
      </div>
      
      <!-- Barra de Progresso responsiva -->
      <div class="bg-white/20 rounded-full h-3 sm:h-4 mb-2 sm:mb-3 shadow-inner">
        <div class="progress-bar bg-gradient-to-r from-green-400 to-green-600 rounded-full h-3 sm:h-4 shadow-lg" 
             style="width: 0%" id="progressBar"></div>
      </div>
      
      <!-- Status responsivo -->
      <div class="flex flex-col sm:flex-row justify-between items-start sm:items-center gap-2 sm:gap-0">
        <div class="flex flex-col sm:flex-row items-start sm:items-center gap-2 sm:gap-6">
          <span id="status" class="text-sm sm:text-base md:text-lg font-semibold">
            <i class="fa-solid fa-question-circle mr-1 sm:mr-2"></i>Pergunta 0/0
          </span>
          <span id="score" class="text-sm sm:text-base md:text-lg font-semibold text-blue-200">
            <i class="fa-solid fa-trophy mr-1 sm:mr-2"></i>Acertos: 0
          </span>
        </div>
      </div>
    </div>
  </header>

  <main class="max-w-4xl mx-auto px-4 py-4 sm:py-6 md:py-8">
    <!-- Tela de Sele√ß√£o de Dificuldade -->
    <div id="difficulty-selection" class="text-center fade-in">
      <div class="bg-white/90 backdrop-blur-sm rounded-2xl shadow-xl p-6 sm:p-8 md:p-10 border border-blue-200 max-w-2xl mx-auto">
        <div class="mb-6 sm:mb-8">
          <div class="text-4xl sm:text-5xl mb-4">ü•ã</div>
          <h2 class="text-2xl sm:text-3xl font-bold text-gradient mb-3">Escolha o N√≠vel de Dificuldade</h2>
          <p class="text-gray-600 text-sm sm:text-base">Selecione o n√≠vel que melhor se adequa ao seu conhecimento sobre jud√¥</p>
        </div>
        
        <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 sm:gap-6 mb-6 sm:mb-8">
          <button onclick="selectDifficulty('easy')" 
                  class="difficulty-btn bg-green-50 hover:bg-green-100 border-2 border-green-200 hover:border-green-400 rounded-xl p-4 sm:p-6 transition-all duration-300 hover:scale-105 hover:shadow-lg">
            <div class="text-3xl sm:text-4xl mb-2">üü¢</div>
            <h3 class="text-lg sm:text-xl font-bold text-green-700 mb-2">F√°cil</h3>
            <p class="text-sm text-green-600">15 perguntas b√°sicas</p>
          </button>
          
          <button onclick="selectDifficulty('medium')" 
                  class="difficulty-btn bg-yellow-50 hover:bg-yellow-100 border-2 border-yellow-200 hover:border-yellow-400 rounded-xl p-4 sm:p-6 transition-all duration-300 hover:scale-105 hover:shadow-lg">
            <div class="text-3xl sm:text-4xl mb-2">üü°</div>
            <h3 class="text-lg sm:text-xl font-bold text-yellow-700 mb-2">M√©dio</h3>
            <p class="text-sm text-yellow-600">15 perguntas intermedi√°rias</p>
          </button>
          
          <button onclick="selectDifficulty('hard')" 
                  class="difficulty-btn bg-red-50 hover:bg-red-100 border-2 border-red-200 hover:border-red-400 rounded-xl p-4 sm:p-6 transition-all duration-300 hover:scale-105 hover:shadow-lg">
            <div class="text-3xl sm:text-4xl mb-2">üî¥</div>
            <h3 class="text-lg sm:text-xl font-bold text-red-700 mb-2">Dif√≠cil</h3>
            <p class="text-sm text-red-600">15 perguntas avan√ßadas</p>
          </button>
          
          <button onclick="selectDifficulty('all')" 
                  class="difficulty-btn bg-purple-50 hover:bg-purple-100 border-2 border-purple-200 hover:border-purple-400 rounded-xl p-4 sm:p-6 transition-all duration-300 hover:scale-105 hover:shadow-lg">
            <div class="text-3xl sm:text-4xl mb-2">üü£</div>
            <h3 class="text-lg sm:text-xl font-bold text-purple-700 mb-2">Todas</h3>
            <p class="text-sm text-purple-600">45 perguntas misturadas</p>
          </button>
        </div>
      </div>
    </div>

    <!-- Quiz Container -->
    <div id="quiz-container" class="space-y-6 hidden"></div>

    <!-- Finaliza√ß√£o responsiva -->
    <div id="result" class="hidden text-center mt-8 sm:mt-12 fade-in">
      <div class="bg-white/90 backdrop-blur-sm rounded-2xl shadow-xl p-4 sm:p-6 md:p-8 border border-blue-200">
        <div class="mb-4 sm:mb-6">
          <div class="text-4xl sm:text-5xl md:text-6xl mb-3 sm:mb-4">üéâ</div>
          <h2 class="text-2xl sm:text-3xl font-bold text-gradient mb-2">Quiz Finalizado!</h2>
          <p class="text-gray-600 text-sm sm:text-base">Parab√©ns por completar o teste de teoria do jud√¥!</p>
        </div>
        
        <div class="grid grid-cols-1 sm:grid-cols-2 gap-3 sm:gap-4 mb-6 sm:mb-8">
          <div class="bg-blue-50 rounded-xl p-3 sm:p-4">
            <div class="text-xl sm:text-2xl font-bold text-blue-600" id="final-score">0/0</div>
            <div class="text-xs sm:text-sm text-blue-700">Acertos</div>
          </div>
          <div class="bg-purple-50 rounded-xl p-3 sm:p-4">
            <div class="text-xl sm:text-2xl font-bold text-purple-600" id="final-percentage">0%</div>
            <div class="text-xs sm:text-sm text-purple-700">Percentual</div>
          </div>
        </div>
        
        <!-- Mensagem de resultado -->
        <div class="text-center mb-6">
          <p class="text-lg font-semibold text-gray-700" id="result-message">
            üéâ Parab√©ns por completar o quiz!
          </p>
        </div>
        
        <div class="flex flex-col sm:flex-row gap-3 sm:gap-4 justify-center">
          <button onclick="restartQuiz()" 
                  class="bg-gradient-to-r from-blue-600 to-blue-500 text-white px-6 sm:px-8 py-2 sm:py-3 rounded-xl hover:from-blue-700 hover:to-blue-600 transition-all duration-300 font-semibold flex items-center justify-center gap-2 text-sm sm:text-base">
            <i class="fa-solid fa-redo"></i>
            Reiniciar Quiz
          </button>
          <a href="/index/" 
             class="bg-gray-100 text-gray-700 px-6 sm:px-8 py-2 sm:py-3 rounded-xl hover:bg-gray-200 transition-all duration-300 font-semibold flex items-center justify-center gap-2 text-sm sm:text-base">
            <i class="fa-solid fa-arrow-left"></i>
            Voltar ao In√≠cio
          </a>
        </div>
      </div>
    </div>
  </main>

  <script>
    // Array original de perguntas classificadas por dificuldade
    const questionsByDifficulty = {
      easy: [
        {
          question: "Quem criou o jud√¥?",
          answers: ["Jigoro Kano", "Mitsuyo Maeda", "Kyuzo Mifune", "Masahiko Kimura"],
          correct: 0,
          explanation: "Jigoro Kano criou o jud√¥ em 1882, fundando o Instituto Kodokan em T√≥quio."
        },
        {
          question: "Qual √© o significado da palavra 'judo'?",
          answers: ["Caminho da for√ßa", "Arte da guerra", "Caminho suave", "Arte marcial"],
          correct: 2,
          explanation: "'Ju' significa suave e 'do' significa caminho, formando 'caminho suave'."
        },
        {
          question: "Qual √© o nome do uniforme usado no jud√¥?",
          answers: ["Kimono", "Gi", "Judogi", "Hakama"],
          correct: 2,
          explanation: "Judogi √© o nome correto do uniforme usado no jud√¥."
        },
        {
          question: "Qual √© o nome do local onde se pratica jud√¥?",
          answers: ["Dojo", "Tatame", "Academia", "Gin√°sio"],
          correct: 0,
          explanation: "Dojo √© o local sagrado onde se pratica jud√¥ e outras artes marciais."
        },
        {
          question: "O que significa 'Rei' no jud√¥?",
          answers: ["Respeito", "For√ßa", "T√©cnica", "Vit√≥ria"],
          correct: 0,
          explanation: "'Rei' significa respeito e √© fundamental na etiqueta do jud√¥."
        },
        {
          question: "Qual √© a cor da faixa mais alta no jud√¥?",
          answers: ["Vermelha", "Preta", "Branca", "Dourada"],
          correct: 0,
          explanation: "A faixa vermelha √© a mais alta, seguida da branca e vermelha, e depois da preta."
        },
        {
          question: "Quantas faixas coloridas existem antes da faixa preta no jud√¥?",
          answers: ["4", "5", "6", "8"],
          correct: 3,
          explanation: "Existem 8 faixas coloridas antes da faixa preta no jud√¥."
        },
        {
          question: "O que significa 'Ukemi' no jud√¥?",
          answers: ["T√©cnica de proje√ß√£o", "T√©cnica de rolamentos", "T√©cnica de queda", "T√©cnica de estrangulamento"],
          correct: 1,
          explanation: "Ukemi s√£o as t√©cnicas de rolamentos que protegem o praticante durante as proje√ß√µes."
        },
        {
          question: "Qual √© o objetivo principal do jud√¥?",
          answers: ["Derrotar o oponente", "Desenvolver corpo e mente", "Ganhar competi√ß√µes", "Aprender autodefesa"],
          correct: 1,
          explanation: "O jud√¥ visa o desenvolvimento f√≠sico, mental e moral atrav√©s da pr√°tica."
        },
        {
          question: "Qual √© a idade m√≠nima para obter a faixa preta no jud√¥?",
          answers: ["14 anos", "16 anos", "18 anos", "N√£o h√° idade m√≠nima"],
          correct: 1,
          explanation: "A idade m√≠nima para obter a faixa preta (1¬∫ dan) √© 16 anos."
        },
        {
          question: "Em que ano o jud√¥ se tornou esporte ol√≠mpico?",
          answers: ["1964", "1972", "1980", "1988"],
          correct: 0,
          explanation: "O jud√¥ se tornou esporte ol√≠mpico em 1964, nos Jogos de T√≥quio."
        },
        {
          question: "Qual √© a dura√ß√£o de uma luta de jud√¥ em competi√ß√£o?",
          answers: ["3 minutos", "4 minutos", "5 minutos", "6 minutos"],
          correct: 1,
          explanation: "Uma luta de jud√¥ em competi√ß√£o dura 4 minutos para adultos."
        },
        {
          question: "O que significa 'Ippon' no jud√¥?",
          answers: ["Ponto completo", "Ponto parcial", "Penalidade", "Empate"],
          correct: 0,
          explanation: "Ippon √© o ponto completo que encerra imediatamente a luta."
        },
        {
          question: "O que significa 'Waza-ari' no jud√¥?",
          answers: ["Ponto completo", "Ponto parcial", "Penalidade", "Aviso"],
          correct: 1,
          explanation: "Waza-ari √© um ponto parcial, dois waza-ari equivalem a um ippon."
        },
        {
          question: "O que significa 'Shido' no jud√¥?",
          answers: ["Ponto", "Penalidade leve", "Penalidade grave", "Desqualifica√ß√£o"],
          correct: 1,
          explanation: "Shido √© uma penalidade leve por infra√ß√µes menores durante a luta."
        }
      ],
      medium: [
        {
          question: "Qual √© o princ√≠pio fundamental do jud√¥?",
          answers: ["M√°xima efici√™ncia com m√≠nimo esfor√ßo", "For√ßa bruta", "Velocidade m√°xima", "T√©cnica perfeita"],
          correct: 0,
          explanation: "O princ√≠pio fundamental √© 'Seiryoku Zenyo' - m√°xima efici√™ncia com m√≠nimo esfor√ßo."
        },
        {
          question: "Qual √© uma das t√©cnicas mais fundamentais do jud√¥?",
          answers: ["Uke-goshi", "Seoi-nage", "O-goshi", "Tai-otoshi"],
          correct: 2,
          explanation: "Seoi-nage √© uma das primeiras t√©cnicas ensinadas no jud√¥, sendo fundamental para o aprendizado."
        },
        {
          question: "O que significa 'Kata' no jud√¥?",
          answers: ["Luta livre", "Forma ou padr√£o", "Competi√ß√£o", "Treino f√≠sico"],
          correct: 1,
          explanation: "Kata s√£o sequ√™ncias formais de t√©cnicas executadas em padr√µes espec√≠ficos."
        },
        {
          question: "Qual √© o nome da t√©cnica de imobiliza√ß√£o mais b√°sica?",
          answers: ["Kesa-gatame", "Kami-shiho-gatame", "Yoko-shiho-gatame", "Tate-shiho-gatame"],
          correct: 0,
          explanation: "Kesa-gatame (imobiliza√ß√£o em diagonal) √© considerada a mais b√°sica das imobiliza√ß√µes."
        },
        {
          question: "O que significa 'Randori' no jud√¥?",
          answers: ["Treino livre", "Competi√ß√£o", "Kata", "Aquecimento"],
          correct: 0,
          explanation: "Randori √© o treino livre onde os praticantes aplicam t√©cnicas sem resist√™ncia excessiva."
        },
        {
          question: "Qual √© o nome da t√©cnica de proje√ß√£o com quadril?",
          answers: ["Seoi-nage", "Tai-otoshi", "O-goshi", "O-soto-gari"],
          correct: 2,
          explanation: "O-goshi √© uma t√©cnica de proje√ß√£o que utiliza o quadril como ponto de apoio principal."
        },
        {
          question: "Qual √© o nome da t√©cnica de proje√ß√£o com perna?",
          answers: ["O-goshi", "Seoi-nage", "O-soto-gari", "Tai-otoshi"],
          correct: 2,
          explanation: "O-soto-gari √© uma t√©cnica de proje√ß√£o que utiliza a perna para derrubar o oponente."
        },
        {
          question: "Qual √© o nome da t√©cnica de proje√ß√£o com biceps?",
          answers: ["O-goshi", "Seoi-nage", "Uke-goshi", "Tai-otoshi"],
          correct: 1,
          explanation: "Seoi-nage √© uma t√©cnica de proje√ß√£o que utiliza o ombro como ponto de apoio."
        },
        {
          question: "Qual √© o nome da t√©cnica de proje√ß√£o com corpo?",
          answers: ["O-goshi", "Seoi-nage", "Tai-otoshi", "Uke-goshi"],
          correct: 2,
          explanation: "Tai-otoshi √© uma t√©cnica de proje√ß√£o que utiliza o corpo como alavanca."
        },
        {
          question: "O que significa 'Osae-komi' no jud√¥?",
          answers: ["Imobiliza√ß√£o", "Proje√ß√£o", "Estrangulamento", "Chave de bra√ßo"],
          correct: 0,
          explanation: "Osae-komi √© o an√∫ncio de que uma imobiliza√ß√£o est√° sendo aplicada."
        },
        {
          question: "O que significa 'Toketa' no jud√¥?",
          answers: ["Imobiliza√ß√£o", "Imobiliza√ß√£o quebrada", "Proje√ß√£o", "Estrangulamento"],
          correct: 1,
          explanation: "Toketa √© o an√∫ncio de que uma imobiliza√ß√£o foi quebrada pelo oponente."
        },
        {
          question: "O que significa 'Sonomama' no jud√¥?",
          answers: ["Interrup√ß√£o tempor√°ria", "Continue", "Lute", "Descanso"],
          correct: 0,
          explanation: "Sonomama √© o comando para parar a luta temporariamente e manter a posi√ß√£o atual."
        },
        {
          question: "O que significa 'Yoshi' no jud√¥?",
          answers: ["Pare", "Interrup√ß√£o de luta", "Lute", "Descanso"],
          correct: 1,
          explanation: "Yoshi √© o comando para interromper a luta temporariamente."
        },
        {
          question: "O que significa 'Mate' no jud√¥?",
          answers: ["Continue", "Pare", "Lute", "Descanso"],
          correct: 1,
          explanation: "Mate √© o comando para parar a luta temporariamente."
        },
        {
          question: "O que significa 'Hajime' no jud√¥?",
          answers: ["Pare", "Continue", "Comece", "Descanso"],
          correct: 2,
          explanation: "Hajime √© o comando para come√ßar a luta."
        },
        {
          question: "Quem introduziu o jud√¥ no Brasil?",
          answers: ["Jigoro Kano", "Mitsuyo Maeda", "Carlos Gracie", "Helio Gracie"],
          correct: 1,
          explanation: "Mitsuyo Maeda, conhecido como 'Conde Koma', introduziu o jud√¥ no Brasil em 1914."
        },
        {
          question: "Em que cidade do Brasil o jud√¥ foi primeiro ensinado?",
          answers: ["S√£o Paulo", "Rio de Janeiro", "Bel√©m do Par√°", "Bras√≠lia"],
          correct: 2,
          explanation: "Mitsuyo Maeda estabeleceu-se em Bel√©m do Par√°, onde fundou a primeira escola de jud√¥ do pa√≠s."
        },
        {
          question: "Qual fam√≠lia brasileira foi influenciada pelo jud√¥ de Maeda?",
          answers: ["Fam√≠lia Gracie", "Fam√≠lia Machado", "Fam√≠lia Vieira", "Fam√≠lia Santos"],
          correct: 0,
          explanation: "A fam√≠lia Gracie foi uma das principais influenciadas pelo jud√¥ de Mitsuyo Maeda, contribuindo para o desenvolvimento do Jiu-Jitsu brasileiro."
        }
      ],
      hard: [
        {
          question: "Qual √© o nome da t√©cnica de estrangulamento mais conhecida?",
          answers: ["Hadaka-jime", "Okuri-eri-jime", "Kata-juji-jime", "Sankaku-jime"],
          correct: 0,
          explanation: "Hadaka-jime (estrangulamento nu) √© uma das t√©cnicas de estrangulamento mais fundamentais."
        },
        {
          question: "Qual √© o nome da t√©cnica de estrangulamento com gola?",
          answers: ["Hadaka-jime", "Okuri-eri-jime", "Kata-juji-jime", "Sankaku-jime"],
          correct: 1,
          explanation: "Okuri-eri-jime √© uma t√©cnica de estrangulamento que utiliza a gola do judogi."
        },
        {
          question: "Qual √© o nome da t√©cnica de estrangulamento com cruz?",
          answers: ["Hadaka-jime", "Okuri-eri-jime", "Kata-juji-jime", "Sankaku-jime"],
          correct: 2,
          explanation: "Kata-juji-jime √© uma t√©cnica de estrangulamento que utiliza os bra√ßos em formato de cruz."
        },
        {
          question: "Qual √© o nome da t√©cnica de estrangulamento com tri√¢ngulo?",
          answers: ["Hadaka-jime", "Okuri-eri-jime", "Kata-juji-jime", "Sankaku-jime"],
          correct: 3,
          explanation: "Sankaku-jime √© uma t√©cnica de estrangulamento que utiliza as pernas em formato de tri√¢ngulo."
        },
        {
          question: "Qual √© o nome da t√©cnica de proje√ß√£o com sacrif√≠cio?",
          answers: ["Tomoe-nage", "Seoi-nage", "O-goshi", "Tai-otoshi"],
          correct: 0,
          explanation: "Tomoe-nage √© uma t√©cnica de proje√ß√£o com sacrif√≠cio onde o atacante se joga ao ch√£o."
        },
        {
          question: "Qual √© o nome da t√©cnica de proje√ß√£o com joelho?",
          answers: ["Hiza-guruma", "Seoi-nage", "O-goshi", "Tai-otoshi"],
          correct: 0,
          explanation: "Hiza-guruma √© uma t√©cnica de proje√ß√£o que utiliza o joelho como ponto de apoio."
        },
        {
          question: "Qual √© o nome da t√©cnica de proje√ß√£o com tornozelo?",
          answers: ["Ashi-guruma", "Seoi-nage", "O-goshi", "Tai-otoshi"],
          correct: 0,
          explanation: "Ashi-guruma √© uma t√©cnica de proje√ß√£o que utiliza o tornozelo como ponto de apoio."
        },
        {
          question: "O que significa 'Hansoku-make' no jud√¥?",
          answers: ["Ponto completo", "Penalidade leve", "Penalidade grave", "Desqualifica√ß√£o"],
          correct: 3,
          explanation: "Hansoku-make √© a desqualifica√ß√£o por infra√ß√µes graves ou acumula√ß√£o de penalidades."
        },
        {
          question: "O que significa 'Sore-made' no jud√¥?",
          answers: ["Continue", "Pare", "Lute", "Fim da luta"],
          correct: 3,
          explanation: "Sore-made √© o comando que indica o fim da luta."
        },
        {
          question: "Qual √© o nome da t√©cnica de imobiliza√ß√£o lateral de quatro pontos?",
          answers: ["Kesa-gatame", "Kami-shiho-gatame", "Yoko-shiho-gatame", "Tate-shiho-gatame"],
          correct: 2,
          explanation: "Yoko-shiho-gatame √© uma imobiliza√ß√£o lateral que utiliza quatro pontos de contato."
        },
        {
          question: "Qual √© o nome da t√©cnica de imobiliza√ß√£o superior de quatro pontos?",
          answers: ["Kesa-gatame", "Kami-shiho-gatame", "Yoko-shiho-gatame", "Tate-shiho-gatame"],
          correct: 1,
          explanation: "Kami-shiho-gatame √© uma imobiliza√ß√£o superior que utiliza quatro pontos de contato."
        },
        {
          question: "Qual √© o nome da t√©cnica de imobiliza√ß√£o vertical de quatro pontos?",
          answers: ["Kesa-gatame", "Kami-shiho-gatame", "Yoko-shiho-gatame", "Tate-shiho-gatame"],
          correct: 3,
          explanation: "Tate-shiho-gatame √© uma imobiliza√ß√£o vertical que utiliza quatro pontos de contato."
        },
        {
          question: "Qual √© o nome da t√©cnica de proje√ß√£o com quadril em diagonal?",
          answers: ["Koshi-guruma", "Seoi-nage", "O-goshi", "Tai-otoshi"],
          correct: 0,
          explanation: "Koshi-guruma √© uma t√©cnica de proje√ß√£o que utiliza o quadril em movimento diagonal."
        },
        {
          question: "Qual √© o nome da t√©cnica de proje√ß√£o com quadril em grande movimento?",
          answers: ["O-goshi", "Koshi-guruma", "Uke-goshi", "Tai-otoshi"],
          correct: 0,
          explanation: "O-goshi √© uma t√©cnica de proje√ß√£o que utiliza o quadril em grande movimento circular."
        },
        {
          question: "Qual √© o nome da t√©cnica de proje√ß√£o com quadril em movimento de apoio?",
          answers: ["O-goshi", "Koshi-guruma", "Uke-goshi", "Tai-otoshi"],
          correct: 2,
          explanation: "Uke-goshi √© uma t√©cnica de proje√ß√£o que utiliza o quadril como ponto de apoio est√°tico."
        }
      ]
    };

    // Vari√°veis globais
    let questions = [];
    let currentQuestion = 0;
    let currentDifficulty = null; // Dificuldade atual do quiz
    let score = 0;
    let answered = false;
    let selectedDifficulty = '';

    // Fun√ß√£o para randomizar array (Fisher-Yates shuffle)
    function shuffleArray(array) {
      const shuffled = [...array];
      for (let i = shuffled.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [shuffled[i], shuffled[j]] = [shuffled[j], shuffled[i]];
      }
      return shuffled;
    }
    
    // Fun√ß√£o para selecionar dificuldade
    function selectDifficulty(difficulty) {
      selectedDifficulty = difficulty;
      currentDifficulty = difficulty; // Definir a dificuldade atual
      
      console.log('üéØ Selecionando dificuldade:', difficulty);
      
      // Limpar cache das perguntas para for√ßar recarregamento
      localStorage.removeItem(`quiz_questions_${difficulty}`);
      console.log('üóëÔ∏è Cache de perguntas limpo para dificuldade:', difficulty);
      
      // Carregar perguntas SEM randomiza√ß√£o (para manter progresso)
      loadQuestionsWithoutRandom(difficulty);
      
      // Esconder sele√ß√£o de dificuldade e mostrar quiz
      document.getElementById('difficulty-selection').classList.add('hidden');
      document.getElementById('quiz-container').classList.remove('hidden');
      
      // Carregar progresso salvo antes de inicializar
      loadQuizProgress().then(() => {
        // Inicializar quiz ap√≥s carregar progresso
        initQuiz();
      }).catch(error => {
        console.log('‚ùå Erro ao carregar progresso:', error);
        // Inicializar quiz mesmo com erro
        initQuiz();
      });
    }
    
    // Fun√ß√£o para carregar perguntas COM randomiza√ß√£o (novo quiz)
    function loadQuestionsWithRandom(difficulty) {
      if (difficulty === 'all') {
        // Para "Todas as Perguntas", misturar todas as perguntas de todos os n√≠veis
        const allEasyQuestions = questionsByDifficulty.easy;
        const allMediumQuestions = questionsByDifficulty.medium;
        const allHardQuestions = questionsByDifficulty.hard;
        
        // Combinar todas as perguntas
        const combinedQuestions = [...allEasyQuestions, ...allMediumQuestions, ...allHardQuestions];
        
        // Selecionar 45 perguntas misturadas (ou todas se houver menos de 45)
        questions = shuffleArray(combinedQuestions).slice(0, 45);
      } else {
        // Selecionar 15 perguntas da dificuldade escolhida
        const allQuestions = questionsByDifficulty[difficulty];
        questions = shuffleArray(allQuestions).slice(0, 15);
      }
      
      // Randomizar alternativas de cada pergunta
      randomizeQuestionAnswers();
      
      // Salvar a ordem das perguntas no localStorage para manter consist√™ncia
      localStorage.setItem(`quiz_questions_${difficulty}`, JSON.stringify(questions));
    }
    
    // Fun√ß√£o para carregar perguntas SEM randomiza√ß√£o (quiz com progresso)
    function loadQuestionsWithoutRandom(difficulty) {
      // Tentar carregar perguntas salvas do localStorage
      const savedQuestions = localStorage.getItem(`quiz_questions_${difficulty}`);
      
      if (savedQuestions) {
        questions = JSON.parse(savedQuestions);
        console.log('‚úÖ Perguntas carregadas do localStorage (ordem mantida)');
      } else {
        // Se n√£o tem perguntas salvas, carregar diretamente sem randomizar
        console.log('‚ö†Ô∏è Perguntas n√£o encontradas no localStorage, carregando diretamente...');
        
        if (difficulty === 'all') {
          // Para "Todas as Perguntas", misturar todas as perguntas de todos os n√≠veis
          const allEasyQuestions = questionsByDifficulty.easy;
          const allMediumQuestions = questionsByDifficulty.medium;
          const allHardQuestions = questionsByDifficulty.hard;
          
          // Combinar todas as perguntas
          const combinedQuestions = [...allEasyQuestions, ...allMediumQuestions, ...allHardQuestions];
          
          // Selecionar 45 perguntas (ou todas se houver menos de 45)
          questions = combinedQuestions.slice(0, 45);
        } else {
          // Selecionar 15 perguntas da dificuldade escolhida (SEM randomizar)
          const allQuestions = questionsByDifficulty[difficulty];
          questions = allQuestions.slice(0, 15);
        }
        
        // Salvar as perguntas no localStorage para manter consist√™ncia
        localStorage.setItem(`quiz_questions_${difficulty}`, JSON.stringify(questions));
        console.log('üíæ Perguntas salvas no localStorage para consist√™ncia');
      }
      
      // Garantir que sempre temos 15 perguntas (exceto para 'all')
      if (difficulty !== 'all' && questions.length > 15) {
        questions = questions.slice(0, 15);
        console.log('üìù Limitando a 15 perguntas por modo');
      }
    }
    
    // Fun√ß√£o para randomizar apenas as alternativas das perguntas
    function randomizeQuestionAnswers() {
      questions.forEach((question, questionIndex) => {
        const originalAnswers = [...question.answers];
        const correctAnswer = originalAnswers[question.correct];
        
        // Randomizar as alternativas
        const shuffledAnswers = shuffleArray(originalAnswers);
        
        // Encontrar a nova posi√ß√£o da resposta correta
        const newCorrectIndex = shuffledAnswers.indexOf(correctAnswer);
        
        // Atualizar a pergunta
        questions[questionIndex] = {
          ...question,
          answers: shuffledAnswers,
          correct: newCorrectIndex
        };
      });
    }

    const quizContainer = document.getElementById("quiz-container");
    const statusElement = document.getElementById("status");
    const scoreElement = document.getElementById("score");
    const progressBar = document.getElementById("progressBar");
    const resultElement = document.getElementById("result");
    const finalScoreElement = document.getElementById("final-score");
    const finalPercentageElement = document.getElementById("final-percentage");

    function updateStatus() {
      console.log('üìä Atualizando status...');
      console.log('   Pergunta atual:', currentQuestion);
      console.log('   Score:', score);
      console.log('   Total perguntas:', questions.length);
      
      statusElement.innerHTML = `<i class="fa-solid fa-question-circle mr-2"></i>Pergunta ${currentQuestion + 1}/${questions.length}`;
      scoreElement.innerHTML = `<i class="fa-solid fa-trophy mr-2"></i>Acertos: ${score}`;
      
      // Calcular progresso baseado na pergunta atual (come√ßando em 0%)
      const progress = (currentQuestion / questions.length) * 100;
      progressBar.style.width = `${progress}%`;
      
      // Salvar progresso no banco de dados
      saveQuizProgress();
      
      console.log('   Progresso calculado:', progress + '%');
      console.log('   Barra de progresso atualizada para:', progressBar.style.width);
      console.log('   Status atualizado com sucesso');
    }

    function createQuestionCard() {
      const q = questions[currentQuestion];
      
      // Log do progresso atual
      const progress = (currentQuestion / questions.length) * 100;
      console.log(`üìä Criando pergunta ${currentQuestion + 1}/${questions.length} - Progresso: ${progress.toFixed(1)}%`);
      
      const card = document.createElement("div");
      card.className = "bg-white/90 backdrop-blur-sm rounded-2xl shadow-xl p-4 sm:p-6 md:p-8 border border-blue-200 fade-in";
      card.style.maxWidth = "800px";
      card.style.margin = "0 auto";

      const questionHeader = document.createElement("div");
      questionHeader.className = "text-center mb-6 sm:mb-8";
      
      const questionNumber = document.createElement("div");
      questionNumber.className = "text-xs sm:text-sm text-blue-600 font-semibold mb-2";
      questionNumber.textContent = `Pergunta ${currentQuestion + 1} de ${questions.length}`;
      
      const questionText = document.createElement("h2");
      questionText.className = "text-lg sm:text-xl md:text-2xl font-bold text-gray-800 mb-3 sm:mb-4";
      questionText.textContent = q.question;
      
      questionHeader.appendChild(questionNumber);
      questionHeader.appendChild(questionText);
      card.appendChild(questionHeader);

      const answersDiv = document.createElement("div");
      answersDiv.className = "grid gap-3 sm:gap-4";

      q.answers.forEach((answer, index) => {
        const btn = document.createElement("button");
        btn.textContent = answer;
        btn.className = "answer-btn bg-white text-gray-800 py-3 sm:py-4 px-4 sm:px-6 rounded-xl border-2 border-gray-200 hover:border-blue-300 hover:bg-gray-50 transition-all duration-300 text-left font-medium text-sm sm:text-base";
        btn.onclick = () => handleAnswer(index, btn, answersDiv);
        answersDiv.appendChild(btn);
      });

      card.appendChild(answersDiv);
      
      // Adicionar explica√ß√£o (inicialmente oculta)
      const explanationDiv = document.createElement("div");
      explanationDiv.className = "mt-4 sm:mt-6 p-3 sm:p-4 bg-blue-50 rounded-xl border border-blue-200 hidden";
      explanationDiv.id = "explanation";
      
      const explanationTitle = document.createElement("div");
      explanationTitle.className = "font-semibold text-blue-800 mb-2 text-sm sm:text-base";
      explanationTitle.innerHTML = '<i class="fa-solid fa-lightbulb mr-1 sm:mr-2"></i>Explica√ß√£o:';
      
      const explanationText = document.createElement("p");
      explanationText.className = "text-blue-700 text-xs sm:text-sm";
      explanationText.textContent = q.explanation;
      
      explanationDiv.appendChild(explanationTitle);
      explanationDiv.appendChild(explanationText);
      card.appendChild(explanationDiv);

      // Bot√£o "Pr√≥xima Pergunta" (inicialmente oculto)
      const nextButtonDiv = document.createElement("div");
      nextButtonDiv.className = "mt-6 text-center hidden";
      nextButtonDiv.id = "next-button-container";
      
      const nextButton = document.createElement("button");
      nextButton.className = "bg-gradient-to-r from-blue-600 to-blue-500 text-white px-8 py-3 rounded-xl hover:from-blue-700 hover:to-blue-600 transition-all duration-300 font-semibold flex items-center justify-center gap-2 mx-auto";
      nextButton.innerHTML = '<i class="fa-solid fa-arrow-right mr-2"></i>Pr√≥xima Pergunta';
      nextButton.onclick = () => nextQuestion();
      
      nextButtonDiv.appendChild(nextButton);
      card.appendChild(nextButtonDiv);

      quizContainer.appendChild(card);
    }

    function handleAnswer(selectedIndex, btn, answersDiv) {
      if (answered) return; // Evitar m√∫ltiplos cliques
      
      const correctIndex = questions[currentQuestion].correct;
      const buttons = answersDiv.querySelectorAll("button");
      const explanation = document.getElementById("explanation");

      // Desabilitar todos os bot√µes
      buttons.forEach(b => b.disabled = true);

      if (selectedIndex === correctIndex) {
        // Resposta correta - mostrar verde
        btn.classList.add("answer-correct");
        score++;
        
        // Mostrar explica√ß√£o
        if (explanation) {
          setTimeout(() => {
            explanation.classList.remove("hidden");
            explanation.classList.add("slide-in");
          }, 500);
        }
        
        // Avan√ßar automaticamente para pr√≥xima pergunta ap√≥s 2 segundos
        setTimeout(() => {
          nextQuestion();
        }, 2000);
        
      } else {
        // Resposta incorreta - mostrar vermelho na resposta errada e verde na correta
        btn.classList.add("answer-incorrect");
        buttons[correctIndex].classList.add("answer-show-correct");
        
        // Mostrar explica√ß√£o
        if (explanation) {
          setTimeout(() => {
            explanation.classList.remove("hidden");
            explanation.classList.add("slide-in");
          }, 500);
        }
        
        // Avan√ßar automaticamente para pr√≥xima pergunta ap√≥s 3 segundos
        setTimeout(() => {
          nextQuestion();
        }, 3000);
      }

      answered = true;
      updateStatus();
      
      // Salvar progresso imediatamente ap√≥s responder
      console.log('üíæ Salvando progresso ap√≥s resposta...');
      saveQuizProgress();
    }

    function nextQuestion() {
      currentQuestion++;
      answered = false;
      
      if (currentQuestion < questions.length) {
        quizContainer.innerHTML = "";
        createQuestionCard();
      } else {
        showResult();
      }
    }

    function showResult() {
      const percentage = Math.round((score / questions.length) * 100);
      
      finalScoreElement.textContent = `${score}/${questions.length}`;
      finalPercentageElement.textContent = `${percentage}%`;
      
      // Adicionar mensagem personalizada baseada na performance
      let message = '';
      let emoji = '';
      
      if (percentage >= 90) {
        message = 'Excelente! Voc√™ √© um verdadeiro mestre do jud√¥!';
        emoji = 'ü•á';
      } else if (percentage >= 70) {
        message = 'Muito bom! Voc√™ tem um √≥timo conhecimento!';
        emoji = 'ü•à';
      } else if (percentage >= 50) {
        message = 'Bom trabalho! Continue praticando!';
        emoji = 'ü•â';
      } else {
        message = 'N√£o desista! A pr√°tica leva √† perfei√ß√£o!';
        emoji = 'üí™';
      }
      
      // Atualizar mensagem no modal
      const messageElement = document.getElementById('result-message');
      if (messageElement) {
        messageElement.innerHTML = `${emoji} ${message}`;
      }
      
      resultElement.classList.remove("hidden");
      resultElement.classList.add("bounce-in");
      
      // Centralizar o modal na tela
      resultElement.scrollIntoView({ behavior: 'smooth', block: 'center' });
      
      // Garantir que a barra de progresso chegue a 100%
      progressBar.style.width = '100%';
      
      // Marcar quiz como completo e salvar progresso final
      console.log('üéâ Quiz completado! Marcando como completo...');
      saveQuizProgress();
      
      // Ap√≥s 3 segundos, reiniciar automaticamente o quiz
      setTimeout(() => {
        console.log('üîÑ Reiniciando quiz automaticamente...');
        restartQuiz();
      }, 3000);
    }

    function restartQuiz() {
      currentQuestion = 0;
      score = 0;
      answered = false;
      quizContainer.innerHTML = "";
      resultElement.classList.add("hidden");
      
      // Voltar para sele√ß√£o de dificuldade
      document.getElementById('difficulty-selection').classList.remove('hidden');
      document.getElementById('quiz-container').classList.add('hidden');
      
      // Resetar barra de progresso
      progressBar.style.width = '0%';
      console.log('üîÑ Quiz reiniciado - barra de progresso resetada para 0%');
      
      // Resetar progresso no backend se h√° uma dificuldade selecionada
      if (currentDifficulty) {
        console.log('üîÑ Resetando progresso no backend...');
        resetQuizProgress();
      }
    }

    function initQuiz() {
      console.log('üéØ Inicializando quiz...');
      console.log('   Pergunta atual:', currentQuestion);
      console.log('   Score:', score);
      console.log('   Total perguntas:', questions.length);
      
      // Sempre atualizar status primeiro
      updateStatus();
      
      // Se h√° perguntas e n√£o completou, criar pergunta
      if (questions.length > 0 && currentQuestion < questions.length) {
        createQuestionCard();
      } else {
        console.log('‚ö†Ô∏è Nenhuma pergunta dispon√≠vel ou quiz j√° completado');
      }
    }

    // Inicializar apenas a tela de sele√ß√£o quando a p√°gina carregar
    document.addEventListener('DOMContentLoaded', function() {
      // Mostrar apenas a sele√ß√£o de dificuldade inicialmente
      document.getElementById('difficulty-selection').classList.remove('hidden');
      document.getElementById('quiz-container').classList.add('hidden');
      document.getElementById('result').classList.add('hidden');
    });

    // ===== SISTEMA DE PROGRESSO LIBERADO - TODOS OS N√çVEIS DISPON√çVEIS =====
    
    // Todos os n√≠veis est√£o liberados - sem verifica√ß√£o de bloqueio
    
    // Salvar progresso do quiz no banco de dados
    function saveQuizProgress() {
      console.log('üîÑ Salvando progresso do quiz...');
      console.log('   Dificuldade:', currentDifficulty);
      console.log('   Pergunta atual:', currentQuestion);
      console.log('   Total perguntas:', questions.length);
      console.log('   Acertos:', score);
      
      // Verificar se temos dados v√°lidos
      if (!currentDifficulty) {
        console.log('‚ùå Nenhuma dificuldade selecionada, n√£o salvando progresso');
        return;
      }
      
      const progressData = {
        dificuldade: currentDifficulty,
        pergunta_atual: currentQuestion,
        total_perguntas: questions.length,
        acertos: score,
        erros: currentQuestion - score,
        pontuacao: score * 10, // 10 pontos por acerto
        quiz_completo: currentQuestion >= questions.length
      };
      
      console.log('üì§ Enviando dados:', progressData);
      
      // Verificar CSRF token
      const csrfToken = document.querySelector('[name=csrfmiddlewaretoken]');
      if (!csrfToken) {
        console.error('‚ùå CSRF token n√£o encontrado!');
        return;
      }
      console.log('üîê CSRF token encontrado:', csrfToken.value.substring(0, 10) + '...');
      
      fetch('/quiz/salvar-progresso/', {
        method: 'POST',
        headers: {
          'Content-Type': 'application/json',
          'X-CSRFToken': document.querySelector('[name=csrfmiddlewaretoken]').value
        },
        body: JSON.stringify(progressData)
      })
      .then(response => {
        console.log('üì• Resposta recebida:', response.status);
        return response.json();
      })
      .then(data => {
        console.log('üìä Dados recebidos:', data);
        if (data.success) {
          console.log('‚úÖ Progresso do quiz salvo:', data.message);
          
          // Quiz completado com sucesso
          if (progressData.quiz_completo) {
            console.log('üéâ Quiz completado com sucesso!');
          }
        } else {
          console.error('‚ùå Erro ao salvar progresso do quiz:', data.error);
        }
      })
      .catch(error => {
        console.error('‚ùå Erro de conex√£o ao salvar progresso do quiz:', error);
      });
    }
    
    // Carregar progresso do quiz do banco de dados
    function loadQuizProgress() {
      return new Promise((resolve, reject) => {
        if (!currentDifficulty) {
          console.log('‚ùå Nenhuma dificuldade selecionada para carregar progresso');
          resolve();
          return;
        }
        
        console.log('üîÑ Carregando progresso do quiz...');
        console.log('   Dificuldade:', currentDifficulty);
        console.log('   Perguntas carregadas:', questions.length);
        
        fetch(`/quiz/carregar-progresso/?dificuldade=${currentDifficulty}`)
        .then(response => {
          console.log('üì• Resposta de carregamento:', response.status);
          return response.json();
        })
        .then(data => {
          console.log('üìä Dados de progresso recebidos:', data);
          
          if (data.success && data.progresso) {
            console.log('‚úÖ Carregando progresso do quiz:', data.progresso);
            
            // Se o quiz foi completado, reiniciar do zero
            if (data.progresso.quiz_completo) {
              console.log('üéâ Quiz j√° foi completado! Reiniciando do zero...');
              currentQuestion = 0;
              score = 0;
              answered = false;
              
              // Limpar progresso salvo e reiniciar no backend
              resetQuizProgress();
            } else {
              // Restaurar estado do quiz se n√£o foi completado
              currentQuestion = data.progresso.pergunta_atual;
              score = data.progresso.acertos;
              
              console.log('   Pergunta atual restaurada:', currentQuestion);
              console.log('   Score restaurado:', score);
              
              // Se o quiz n√£o foi completado, continuar de onde parou
              if (currentQuestion < questions.length) {
                console.log(`üéØ Continuando quiz da pergunta ${currentQuestion + 1}`);
                // Atualizar status ap√≥s carregar progresso
                updateStatus();
              }
            }
          } else {
            console.log('‚ÑπÔ∏è Nenhum progresso salvo para esta dificuldade');
          }
          
          resolve();
        })
        .catch(error => {
          console.error('‚ùå Erro ao carregar progresso do quiz:', error);
          reject(error);
        });
      });
    }
    
    // Fun√ß√£o para resetar o progresso do quiz no backend
    function resetQuizProgress() {
      console.log('üîÑ Resetando progresso do quiz no backend...');
      
      const resetData = {
        dificuldade: currentDifficulty,
        pergunta_atual: 0,
        total_perguntas: questions.length,
        acertos: 0,
        erros: 0,
        pontuacao: 0,
        quiz_completo: false
      };
      
      console.log('üì§ Enviando dados de reset:', resetData);
      
      // Verificar CSRF token
      const csrfToken = document.querySelector('[name=csrfmiddlewaretoken]');
      if (!csrfToken) {
        console.error('‚ùå CSRF token n√£o encontrado!');
        return;
      }
      
      fetch('/quiz/salvar-progresso/', {
        method: 'POST',
        headers: {
          'Content-Type': 'application/json',
          'X-CSRFToken': document.querySelector('[name=csrfmiddlewaretoken]').value
        },
        body: JSON.stringify(resetData)
      })
      .then(response => {
        console.log('üì• Resposta de reset recebida:', response.status);
        return response.json();
      })
      .then(data => {
        console.log('üìä Dados de reset recebidos:', data);
        if (data.success) {
          console.log('‚úÖ Progresso do quiz resetado com sucesso!');
        } else {
          console.error('‚ùå Erro ao resetar progresso do quiz:', data.error);
        }
      })
      .catch(error => {
        console.error('‚ùå Erro de conex√£o ao resetar progresso do quiz:', error);
      });
    }
    
    // Modificar a fun√ß√£o nextQuestion para salvar progresso
    const originalNextQuestion = nextQuestion;
    nextQuestion = function() {
      originalNextQuestion();
      updateStatus(); // Atualizar barra de progresso
      saveQuizProgress(); // Salvar progresso ap√≥s cada pergunta
    };
    
    // Modificar a fun√ß√£o selectDifficulty para carregar progresso
    const originalSelectDifficulty = selectDifficulty;
    selectDifficulty = function(difficulty) {
      console.log('üéØ Iniciando selectDifficulty para:', difficulty);
      
      // Primeiro carregar o progresso, depois inicializar o quiz
      loadQuizProgress().then(() => {
        console.log('‚úÖ Progresso carregado, inicializando quiz...');
        originalSelectDifficulty(difficulty);
      }).catch(error => {
        console.error('‚ùå Erro ao carregar progresso, continuando sem progresso:', error);
        originalSelectDifficulty(difficulty);
      });
    };
    
    // Todos os n√≠veis est√£o liberados - sem verifica√ß√£o necess√°ria
  </script>
</body>
</html>
